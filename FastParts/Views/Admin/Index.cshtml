@{
    ViewBag.Title = "Panel de Administración";

    var totalEncuestas = ViewBag.TotalEncuestas ?? 128;
    var totalUsuarios = ViewBag.TotalUsuarios ?? 42;
    var totalReportes = ViewBag.TotalReportes ?? 14;
    var totalServicios = ViewBag.TotalServicios ?? 18;

    // Nuevos totales (puedes setearlos desde el controlador)
    var totalPromociones = ViewBag.TotalPromociones ?? 3;
    var totalMantenimientos = ViewBag.TotalMantenimientos ?? 7;
    var totalRepuestos = ViewBag.TotalRepuestos ?? 256;
}

<link rel="stylesheet" href="~/css/site.css" />

<div class="container mt-4">
    <div class="d-flex align-items-center justify-content-between mb-3">
        <div>
            <h2 class="mb-0">Panel de Administración</h2>
            <small class="text-muted">Control Administrativo — Accesos rápidos y métricas.</small>
        </div>        
    </div>

    <!-- GRID: UNA COLUMNA -->
    <div class="row admin-grid row-cols-1 g-3">

        <!-- Encuestas -->
        <div class="col col-12">
            <a href="@Url.Action("AdministrarEncuestas", "Encuesta")" class="admin-card-link">
                <div class="admin-card gradient-primary d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-chat-left-text"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Encuestas de Satisfacción</h5>
                                    <div class="small-stat">Ver y analizar las encuestas enviadas por los clientes.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalEncuestas</div>
                                    <div class="chip mt-1">Nuevas: 5</div>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("AdministrarEncuestas", "Encuesta")"><i class="bi bi-bar-chart-line me-1"></i> Gestionar Encuestas</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!--Tarejeta Gestion Usuarios -->
        <div class="col col-12">
            <a href="@Url.Action("Usuarios", "Account")" class="admin-card-link">
                <div class="admin-card gradient-success d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-people"></i></div>
                        </div>
                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Gestión de Usuarios</h5>
                                    <div class="small-stat">Consultar, editar roles y permisos.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalUsuarios</div>
                                    <span class="badge bg-white text-success">Activos</span>
                                </div>
                            </div>
                            <div class="admin-actions">
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Usuarios", "Account")"><i class="bi bi-person-plus me-1"></i> Gestionar Usuarios</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!-- Repuestos/Inventario -->
        <div class="col col-12">
            <a href="@Url.Action("Index", "Repuestos")" class="admin-card-link">
                <div class="admin-card gradient-danger d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-file-earmark-text"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Respuestos</h5>
                                    <div class="small-stat">Visualizar repuestos en inventario y alertas.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalReportes</div>
                                    <div class="chip mt-1">Última: 3 días</div>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Index", "Repuestos")"><i class="bi bi-list-ul me-1"></i>Gestionar Repuestos</a>
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("AlertasInventario", "Admin")"><i class="bi bi-exclamation-triangle me-1"></i>Alertas</a>

                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!-- Servicios -->
        <div class="col col-12">
            <a href="@Url.Action("Index", "Servicio")" class="admin-card-link">
                <div class="admin-card gradient-info d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-wrench"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Servicios</h5>
                                    <div class="small-stat">Lista de servicios, precios y tiempos estimados.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalServicios</div>
                                    <span class="badge bg-white text-info">Activos</span>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Index", "Servicio")"><i class="bi bi-wrench me-1"></i>Gestionar Servicios</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <!-- Tarjeta Extra#1 -->
        @*<div class="col col-12">
            <a href="@Url.Action("Index", "Promocion")" class="admin-card-link">
                <div class="admin-card gradient-primary d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-tag"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Promociones</h5>
                                    <div class="small-stat">Crear y gestionar ofertas y descuentos futuros.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalPromociones</div>
                                    <div class="chip mt-1">Activas: 1</div>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-outline-light" href="@Url.Action("Crear", "Promocion")"><i class="bi bi-plus-circle me-1"></i> Nueva promoción</a>
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Index", "Promocion")"><i class="bi bi-list-ul me-1"></i> Ver promociones</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>*@

        <!-- Tarjeta Extra#2  -->
        @*<div class="col col-12">
            <a href="@Url.Action("Index", "Mantenimiento")" class="admin-card-link">
                <div class="admin-card gradient-success d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-calendar-check"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Mantenimientos Programados</h5>
                                    <div class="small-stat">Planificar servicios recurrentes y recordatorios.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalMantenimientos</div>
                                    <span class="badge bg-white text-success">Programados</span>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-outline-light" href="@Url.Action("Crear", "Mantenimiento")"><i class="bi bi-calendar-plus me-1"></i> Agendar</a>
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Index", "Mantenimiento")"><i class="bi bi-clock-history me-1"></i> Historial</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>*@

        <!-- Tarjeta Extra#3 -->
        @*<div class="col col-12">
            <a href="@Url.Action("Index", "Repuesto")" class="admin-card-link">
                <div class="admin-card gradient-danger d-flex align-items-center">
                    <div class="card-body d-flex w-100">
                        <div class="me-3">
                            <div class="icon-circle"><i class="bi bi-box-seam"></i></div>
                        </div>

                        <div class="flex-grow-1">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h5 class="mb-1">Inventario de Repuestos</h5>
                                    <div class="small-stat">Control de stock, entradas y salidas.</div>
                                </div>
                                <div class="text-end">
                                    <div class="fs-5 fw-bold">@totalRepuestos</div>
                                    <div class="chip mt-1">Bajo: 12</div>
                                </div>
                            </div>

                            <div class="admin-actions">
                                <a class="btn btn-sm btn-outline-light" href="@Url.Action("Index", "Repuesto")"><i class="bi bi-boxes me-1"></i> Ver inventario</a>
                                <a class="btn btn-sm btn-light ms-2" href="@Url.Action("Crear", "Repuesto")"><i class="bi bi-plus-circle me-1"></i> Añadir repuesto</a>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>*@
        <br />
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.forEach(function (el) { new bootstrap.Tooltip(el); });
    });
</script>
