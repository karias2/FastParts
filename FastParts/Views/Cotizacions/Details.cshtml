@model FastParts.Models.Cotizacion



@{
    ViewBag.Title = "Detalle de Cotización";
    // Lista de IDs de cotizaciones para navegación
    var ids = FastParts.Controllers.CotizacionsController.cotizaciones.Select(c => c.Id).ToList();
    int index = ids.IndexOf(Model.Id);
    int prevId = index > 0 ? ids[index - 1] : Model.Id;
    int nextId = index < ids.Count - 1 ? ids[index + 1] : Model.Id;
}

<h2>Cotización #@Model.Id</h2>

<div class="card mb-3">
    <div class="card-header">
        Datos del Cliente
    </div>
    <div class="card-body">
        <p><strong>Nombre:</strong> @Model.Cliente.Nombre</p>
        <p><strong>Apellido:</strong> @Model.Cliente.Apellido</p>
        <p><strong>Identificación:</strong> @Model.Cliente.Identificacion</p>
        <p><strong>Correo:</strong> @Model.Cliente.Correo</p>
        <p><strong>Fecha:</strong> @Model.Fecha.ToShortDateString()</p>
        <p><strong>Estado:</strong> @(Model.Enviada ? "Enviada" : "Preliminar")</p>
    </div>
</div>

<h4>Servicios</h4>
<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Descripción</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Subtotal</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model.Servicios)
        {
            <tr>
                <td>@s.Descripcion</td>
                <td>@s.Cantidad</td>
                <td>@s.PrecioUnitario</td>
                <td>@(s.Cantidad * s.PrecioUnitario)</td>
            </tr>
        }
    </tbody>
</table>

<p><strong>Total:</strong> @Model.Total</p>

<div class="mt-3">
    <a class="btn btn-secondary" href="@Url.Action("Index")">Volver al listado</a>
    <a class="btn btn-info" href="@Url.Action("Details", new { id = prevId })">Anterior</a>
    <a class="btn btn-info" href="@Url.Action("Details", new { id = nextId })">Siguiente</a>
    @if (!Model.Enviada)
    {
        <a class="btn btn-warning" href="@Url.Action("Editar", new { id = Model.Id })">Editar Cotización</a>
    }
</div>
